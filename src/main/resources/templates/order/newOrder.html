<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" xmlns:th="http://www.thymeleaf.org">
  <title>Title</title>
  <link rel="StyleSheet" href="/css/mypetstore.css" type="text/css"
        media="screen" />
</head>
<body>
<header th:replace="common/top"></header>
<div id="BackLink">
  <a href="/cart/cart">Return to</a>
</div>

<div id="Catalog">
  <form th:action="@{/order/submit}" method="post">
    <table>
      <tr>
        <td>
          <h2>Checkout Summary</h2>

          <table>

            <tr>
              <td><b>Item ID</b></td>
              <td><b>Product ID</b></td>
              <td><b>In Stock?</b></td>
              <td><b>Quantity</b></td>
              <td><b>List Price</b></td>
              <td><b>Total Cost</b></td>
            </tr>

            <th:block th:each="cartItem:${session.cart.cartItems}">
              <tr>
                <td th:text="${cartItem?.item?.productId}"></td>
                <td th:text="|${cartItem?.item?.attribute1} ${cartItem?.item?.attribute2}
                            ${cartItem?.item?.attribute3} ${cartItem?.item?.attribute4}
                            ${cartItem?.item?.attribute5} ${cartItem?.item?.name}|"></td>
                <td th:text="${cartItem?.inStock}"></td>
                <td th:text="${cartItem.quantity}"></td>
                <td> <span th:text="${#numbers.formatDecimal(cartItem.item?.listPrice, 2,2)}"></span></td>
                <td><span th:text="${#numbers.formatDecimal(cartItem?.total, 2, 2)}"></span></td>
              </tr>
            </th:block>
<!--            <tr>-->
<!--              <td  colspan="8">-->
<!--                <h3 id="personal" >个人信息</h3>-->
<!--              </td>-->
<!--            </tr>-->
<!--            <tbody id="content" class="content">-->
<!--            <tr>-->
<!--              <td ></td> <td class='personinf' id='email'> </td>-->
<!--            </tr>-->
<!--&lt;!&ndash;            <tr>&ndash;&gt;-->
<!--&lt;!&ndash;              <td ></td> <td class='personinf' id='firstName'></td>&ndash;&gt;-->
<!--&lt;!&ndash;              <td class='personinf' id='lastName'>  </td>&ndash;&gt;-->
<!--&lt;!&ndash;            </tr>&ndash;&gt;-->
<!--&lt;!&ndash;            <tr>&ndash;&gt;-->
<!--&lt;!&ndash;              <td ></td>&ndash;&gt;-->
<!--&lt;!&ndash;              <td class='personinf' id='address1'> </td>&ndash;&gt;-->
<!--&lt;!&ndash;              <td  class='personinf' id='address2'></td>&ndash;&gt;-->
<!--&lt;!&ndash;              <td  class='personinf' id='city'></td>&ndash;&gt;-->
<!--&lt;!&ndash;              <td  class='personinf' id='country'>  </td>&ndash;&gt;-->
<!--&lt;!&ndash;            </tr>&ndash;&gt;-->
<!--&lt;!&ndash;            <tr>&ndash;&gt;-->
<!--&lt;!&ndash;              <td></td> <td class='personinf' id='phone'></td>&ndash;&gt;-->
<!--&lt;!&ndash;            </tr>&ndash;&gt;-->
<!--            </tbody>-->
            <tr>
              <td colspan="7">Sub Total:  <span th:text="${#numbers.formatDecimal(session.cart?.subTotal, 2,2)}"></span>
                <input type="submit" value="submission"></td>
            </tr>


          </table>

        <td>&nbsp;</td>

      </tr>
    </table> </form>

<!--  <script>-->

<!--    var userinfs;-->

<!--    document.getElementById('content').addEventListener('click', (event)=>{-->
<!--      if (event.target.classList.contains('personinf')){-->

<!--        const userInput = prompt('please enter ' + event.target.id, '');-->

<!--        if(userInput !== null){-->
<!--          const xhr1 = new XMLHttpRequest();-->
<!--          xhr1.open('GET', "userInfChange?userId=" + event.target.id + "&input=" + userInput, true);-->

<!--          xhr1.onreadystatechange = function (){-->
<!--            if (xhr1.readyState === 4){-->
<!--              if (xhr1.status === 200){-->
<!--                console.log('success1');-->
<!--                const xhr2 = new XMLHttpRequest();-->
<!--                xhr2.open('GET', "personalInformation?shown=false" , true);-->
<!--                xhr2.onreadystatechange = function (){-->
<!--                  if (xhr2.readyState === 4){-->
<!--                    if (xhr2.status === 200){-->
<!--                      document.getElementById('content').innerHTML = xhr2.responseText;-->
<!--                      console.log("success2");-->
<!--                    }}}-->

<!--                xhr2.send();-->
<!--              }-->
<!--            }-->
<!--          }-->
<!--          xhr1.send();-->
<!--        }-->




<!--      }-->

<!--    })-->

<!--    console.log(userinfs);-->
<!--    var userId;-->




<!--    const person = document.getElementById('personal');-->
<!--    person.style.color = 'red';-->

<!--    var userInput;-->
<!--    var shown = false;-->
<!--    person.addEventListener('click', function(){-->

<!--      const xhr = new XMLHttpRequest();-->

<!--      xhr.open('GET', "personalInformation?shown=" + shown, true);-->

<!--      xhr.onreadystatechange = function (){-->
<!--        if (xhr.readyState === 4){-->
<!--          if (xhr.status === 200){-->
<!--            document.getElementById('content').innerHTML = xhr.responseText;-->
<!--            shown = !shown;-->
<!--          }-->
<!--        }-->
<!--      }-->
<!--      xhr.send();-->
<!--    })-->


<!--  </script>-->

</div>






<footer th:replace="common/bottom"></footer>
</body>
</html>